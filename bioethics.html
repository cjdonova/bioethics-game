<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Biotech Dilemmas: Complex Choose-Your-Own-Adventure</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #2c3e50, #3498db);
      color: white;
      padding: 30px;
      text-align: center;
    }
    .header h1 {
      margin: 0;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .tabs {
      display: flex;
      background: #34495e;
    }
    .tab {
      flex: 1;
      padding: 15px 20px;
      background: #34495e;
      color: white;
      cursor: pointer;
      text-align: center;
      transition: background 0.3s;
      border-right: 1px solid #2c3e50;
    }
    .tab:last-child {
      border-right: none;
    }
    .tab.active {
      background: #3498db;
    }
    .tab.completed {
      background: #27ae60;
    }
    .tab.locked {
      background: #95a5a6;
      cursor: not-allowed;
      opacity: 0.6;
    }
    .scenario {
      display: none;
      padding: 30px;
      min-height: 500px;
    }
    .scenario.active {
      display: block;
    }
    .scenario-content {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 25px;
      border-left: 5px solid #3498db;
    }
    .consequence-box {
      margin: 20px 0;
      padding: 20px;
      border-radius: 10px;
      display: none;
    }
    .consequence-positive {
      background: linear-gradient(135deg, #d4edda, #c3e6cb);
      border-left: 5px solid #28a745;
    }
    .consequence-negative {
      background: linear-gradient(135deg, #f8d7da, #f5c6cb);
      border-left: 5px solid #dc3545;
    }
    .consequence-mixed {
      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
      border-left: 5px solid #ffc107;
    }
    .choices {
      margin-top: 25px;
    }
    .choice {
      margin: 15px 0;
      display: block;
      width: 100%;
    }
    .choice button {
      width: 100%;
      padding: 15px 20px;
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s;
      text-align: left;
    }
    .choice button:hover {
      background: linear-gradient(135deg, #2980b9, #1f4e79);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .choice button:disabled {
      background: #95a5a6;
      cursor: not-allowed;
      transform: none;
    }
    .player-input {
      margin: 20px 0;
      padding: 20px;
      background: #f1f3f4;
      border-radius: 10px;
    }
    .player-input textarea {
      width: 100%;
      height: 80px;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-family: inherit;
      resize: vertical;
      box-sizing: border-box;
    }
    .ethics-score {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(52, 73, 94, 0.9);
      color: white;
      padding: 15px;
      border-radius: 10px;
      font-weight: bold;
      z-index: 1000;
    }
    .final-results {
      text-align: center;
      padding: 40px;
    }
    .final-score {
      font-size: 3em;
      color: #3498db;
      margin: 20px 0;
    }
    .restart-btn {
      margin-top: 30px;
      padding: 15px 30px;
      background: linear-gradient(135deg, #27ae60, #219a52);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    .decision-history {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      text-align: left;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>🧬 Biotech Dilemmas: Complex Ethics Adventure</h1>
    <p>Navigate multi-layered ethical challenges where each decision creates new complications</p>
  </div>

  <div class="ethics-score">
    Ethics Score: <span id="ethicsScore">100</span>/100
  </div>

  <div class="tabs">
    <div class="tab active" id="tab1">Genetic Testing Crisis</div>
    <div class="tab locked" id="tab2">AI Diagnostic Dilemma</div>
    <div class="tab locked" id="tab3">Gene Therapy Pricing</div>
    <div class="tab locked" id="tab4">Final Results</div>
  </div>

  <!-- Scenario 1 -->
  <div id="scenario1" class="scenario active">
    <div class="scenario-content">
      <h2>🧬 The Genetic Testing Startup Dilemma</h2>
      <p>You've founded a biotech startup that developed a revolutionary genetic test capable of detecting 15 types of cancer with 94% accuracy from a simple blood draw. The test costs $50 to produce but could save millions of lives through early detection. However, you're facing a critical funding crisis - you have 3 months of runway left. MegaHealth Corporation has offered $50 million in exchange for exclusive distribution rights and the ability to price the test at $2,500 per person. They plan to market primarily to wealthy patients and premium insurance plans.</p>
    </div>

    <div id="consequence1" class="consequence-box"></div>

    <div class="player-input">
      <label><strong>💭 Your Strategic Thinking:</strong></label>
      <textarea id="thinking1" placeholder="What factors are you considering? What are the ethical implications? How do you weigh saving your company vs. ensuring broad access?"></textarea>
    </div>

    <div class="choices">
      <div class="choice">
        <button onclick="makeChoice(1, 1, -10)">
          Accept MegaHealth's offer for immediate funding and survival
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(1, 2, 5)">
          Reject the offer and seek alternative funding sources
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(1, 3, 10)">
          Negotiate with MegaHealth for tiered pricing model
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(1, 4, 15)">
          Launch crowdfunding campaign with public health partnership
        </button>
      </div>
    </div>
  </div>

  <!-- Scenario 2 -->
  <div id="scenario2" class="scenario">
    <div class="scenario-content">
      <h2>🤖 AI Stroke Prediction Algorithm</h2>
      <p>Building on your previous decisions, your company has developed an AI algorithm that predicts stroke risk 6 months in advance with 89% accuracy. EliteInsure wants to license your technology for $100 million, but they plan to use it primarily for premium clients and may deny coverage to high-risk individuals. The CDC offers $15 million over 3 years for public health implementation.</p>
    </div>

    <div id="consequence2" class="consequence-box"></div>

    <div class="player-input">
      <label><strong>💭 Your Strategic Analysis:</strong></label>
      <textarea id="thinking2" placeholder="How does your previous decision influence this choice? What are the long-term implications for healthcare equity?"></textarea>
    </div>

    <div class="choices">
      <div class="choice">
        <button onclick="makeChoice(2, 1, -15)">
          License exclusively to EliteInsure for maximum profit
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(2, 2, 15)">
          Partner with CDC for public health implementation
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(2, 3, 8)">
          Create dual licensing: commercial + public health
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(2, 4, 12)">
          Establish nonprofit model with multiple partners
        </button>
      </div>
    </div>
  </div>

  <!-- Scenario 3 -->
  <div id="scenario3" class="scenario">
    <div class="scenario-content">
      <h2>🧬 Revolutionary Gene Therapy Pricing</h2>
      <p>Your company has developed a one-time gene therapy that cures a rare genetic disease affecting 50,000 children globally. The treatment costs $100,000 to manufacture. Your pharmaceutical partner wants to price it at $2.8 million per treatment. This would make it accessible only in wealthy countries, while 70% of affected children live in low and middle-income countries.</p>
    </div>

    <div id="consequence3" class="consequence-box"></div>

    <div class="player-input">
      <label><strong>💭 Your Global Strategy:</strong></label>
      <textarea id="thinking3" placeholder="How do you balance commercial viability with global health equity? What precedent does this set?"></textarea>
    </div>

    <div class="choices">
      <div class="choice">
        <button onclick="makeChoice(3, 1, -20)">
          Approve high pricing for rapid profit maximization
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(3, 2, 20)">
          Implement global tiered pricing program
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(3, 3, 10)">
          License to generic manufacturers in developing countries
        </button>
      </div>
      <div class="choice">
        <button onclick="makeChoice(3, 4, 18)">
          Create cross-subsidization foundation model
        </button>
      </div>
    </div>
  </div>

  <!-- Final Results -->
  <div id="results" class="scenario">
    <div class="final-results">
      <h2>🎯 Your Biotech Ethics Journey Complete</h2>
      <div class="final-score" id="finalScore">100</div>
      <div id="finalAssessment"></div>
      
      <div class="decision-history" id="decisionHistory"></div>
      <div class="decision-history" id="thinkingHistory"></div>

      <button class="restart-btn" onclick="restartGame()">🔄 Explore Different Paths</button>
    </div>
  </div>
</div>

<script>
// Game state
var gameState = {
  ethicsScore: 100,
  currentScenario: 1,
  decisions: [],
  thinking: []
};

// Consequence data
var consequences = {
  1: {
    1: { type: 'negative', text: 'You accept MegaHealth\'s offer. Your company survives and grows rapidly, but the $2,500 price point creates a "genetic testing divide." Patient advocacy groups organize protests, and competitors launch campaigns about "healthcare for the wealthy only." Your test saves lives among affluent patients, but thousands of low-income individuals who could benefit remain undiagnosed.' },
    2: { type: 'mixed', text: 'You reject MegaHealth\'s offer on ethical grounds. While maintaining your principles, your company struggles financially. Two competitors secure major investments and beat you to market with similar tests. You eventually find alternative funding through impact investors, but it takes 8 months longer to launch.' },
    3: { type: 'positive', text: 'You successfully negotiate a tiered pricing model: $2,500 for premium markets, $500 for standard insurance, and $50 for low-income patients (subsidized by higher-paying customers). MegaHealth agrees when you demonstrate the long-term market expansion benefits.' },
    4: { type: 'positive', text: 'Your crowdfunding campaign "Cancer Detection for All" goes viral, raising $30 million from 500,000 individual contributors. You partner with community health centers and international NGOs for global distribution. The grassroots approach builds enormous public goodwill.' }
  },
  2: {
    1: { type: 'negative', text: 'You license to EliteInsure for maximum profit. They use your AI to cherry-pick low-risk customers while denying coverage to those most likely to have strokes. Congressional hearings follow, and you\'re accused of enabling "algorithmic discrimination."' },
    2: { type: 'positive', text: 'You partner with the CDC for public health implementation. Your algorithm becomes part of national preventive care guidelines. You prevent 50,000 strokes annually across all demographics and establish your company as a leader in ethical AI development.' },
    3: { type: 'mixed', text: 'You create a dual licensing model: EliteInsure gets commercial rights while CDC gets public health rights. This generates good revenue while ensuring broad access, but creates complexity in data management.' },
    4: { type: 'positive', text: 'You create a nonprofit subsidiary that provides the AI technology as a public service, funded by licensing fees from multiple smaller insurers. This innovative model balances accessibility with sustainability.' }
  },
  3: {
    1: { type: 'negative', text: 'You approve the $2.8M pricing strategy. The therapy becomes profitable quickly in wealthy markets, but 35,000 children in developing countries remain untreated. International health organizations condemn the pricing as "putting profits over children\'s lives."' },
    2: { type: 'positive', text: 'You implement a global access program with differential pricing: $2.8M in high-income countries, $200K in middle-income countries, and free treatment in low-income countries through a patient assistance fund. This treats 45,000 children globally.' },
    3: { type: 'mixed', text: 'You license the manufacturing rights to generic producers in developing countries while maintaining premium pricing in wealthy markets. This increases access but reduces your direct revenue and creates quality control challenges.' },
    4: { type: 'positive', text: 'You establish a "Treatment for All" foundation funded by a portion of profits from wealthy markets. Every treatment sold in a high-income country funds two treatments in low-income countries. This becomes an industry standard.' }
  }
};

function makeChoice(scenario, choice, ethicsChange) {
  // Record thinking
  var thinkingElement = document.getElementById('thinking' + scenario);
  if (thinkingElement && thinkingElement.value.trim()) {
    gameState.thinking.push({
      scenario: scenario,
      thought: thinkingElement.value.trim()
    });
  }

  // Update ethics score
  gameState.ethicsScore += ethicsChange;
  gameState.ethicsScore = Math.max(0, Math.min(100, gameState.ethicsScore));
  document.getElementById('ethicsScore').textContent = gameState.ethicsScore;

  // Record decision
  var choiceText = event.target.textContent.trim();
  gameState.decisions.push({
    scenario: scenario,
    choice: choiceText,
    ethicsChange: ethicsChange
  });

  // Show consequence
  var consequenceBox = document.getElementById('consequence' + scenario);
  var consequence = consequences[scenario][choice];
  consequenceBox.className = 'consequence-box consequence-' + consequence.type;
  consequenceBox.innerHTML = '<strong>Consequence:</strong> ' + consequence.text;
  consequenceBox.style.display = 'block';

  // Disable choices
  var buttons = document.querySelectorAll('#scenario' + scenario + ' button');
  for (var i = 0; i < buttons.length; i++) {
    buttons[i].disabled = true;
  }

  // Progress to next scenario
  setTimeout(function() {
    if (scenario < 3) {
      unlockNextScenario(scenario + 1);
    } else {
      showFinalResults();
    }
  }, 3000);
}

function unlockNextScenario(scenarioNum) {
  // Update tabs
  var currentTab = document.getElementById('tab' + (scenarioNum - 1));
  var nextTab = document.getElementById('tab' + scenarioNum);
  
  currentTab.classList.remove('active');
  currentTab.classList.add('completed');
  nextTab.classList.remove('locked');
  nextTab.classList.add('active');

  // Switch scenarios
  var currentScenario = document.getElementById('scenario' + (scenarioNum - 1));
  var nextScenario = document.getElementById('scenario' + scenarioNum);
  
  currentScenario.classList.remove('active');
  nextScenario.classList.add('active');
}

function showFinalResults() {
  // Update tabs
  var tab3 = document.getElementById('tab3');
  var tab4 = document.getElementById('tab4');
  
  tab3.classList.remove('active');
  tab3.classList.add('completed');
  tab4.classList.remove('locked');
  tab4.classList.add('active');

  // Switch to results
  var scenario3 = document.getElementById('scenario3');
  var results = document.getElementById('results');
  
  scenario3.classList.remove('active');
  results.classList.add('active');

  // Calculate final assessment
  var assessment = '';
  if (gameState.ethicsScore >= 80) {
    assessment = '🌟 Ethical Pioneer: You consistently balanced profit with purpose, creating innovative models that prioritize both business success and social impact. Your decisions set new industry standards for ethical biotech leadership.';
  } else if (gameState.ethicsScore >= 60) {
    assessment = '⚖️ Balanced Leader: You navigated complex ethical challenges with mixed results, showing the difficulty of balancing commercial and social objectives in biotechnology.';
  } else if (gameState.ethicsScore >= 40) {
    assessment = '💼 Profit-Focused: Your decisions prioritized financial returns, sometimes at the expense of broader access and ethical considerations.';
  } else {
    assessment = '⚠️ Cautionary Tale: Your journey illustrates how prioritizing short-term profits over ethical considerations can damage both business reputation and public health outcomes.';
  }
  
  document.getElementById('finalScore').textContent = gameState.ethicsScore;
  document.getElementById('finalAssessment').textContent = assessment;
  
  // Show decision history
  var decisionHistory = '';
  for (var i = 0; i < gameState.decisions.length; i++) {
    var decision = gameState.decisions[i];
    decisionHistory += '<div><strong>Scenario ' + decision.scenario + ':</strong> ' + decision.choice + '<br><small>Ethics Impact: ' + (decision.ethicsChange > 0 ? '+' : '') + decision.ethicsChange + '</small></div><br>';
  }
  document.getElementById('decisionHistory').innerHTML = '<h3>📊 Your Decision Path</h3>' + decisionHistory;
  
  // Show thinking history
  var thinkingHistory = '';
  for (var i = 0; i < gameState.thinking.length; i++) {
    var thought = gameState.thinking[i];
    thinkingHistory += '<div><strong>Scenario ' + thought.scenario + ':</strong> ' + thought.thought + '</div><br>';
  }
  document.getElementById('thinkingHistory').innerHTML = '<h3>🧠 Your Reasoning Process</h3>' + (thinkingHistory || '<div>No reflections recorded during your journey.</div>');
}

function restartGame() {
  gameState = {
    ethicsScore: 100,
    currentScenario: 1,
    decisions: [],
    thinking: []
  };
  
  document.getElementById('ethicsScore').textContent = '100';
  
  // Reset tabs
  var tabs = document.querySelectorAll('.tab');
  for (var i = 0; i < tabs.length; i++) {
    tabs[i].classList.remove('active', 'completed');
    tabs[i].classList.add('locked');
  }
  document.getElementById('tab1').classList.remove('locked');
  document.getElementById('tab1').classList.add('active');
  
  // Reset scenarios
  var scenarios = document.querySelectorAll('.scenario');
  for (var i = 0; i < scenarios.length; i++) {
    scenarios[i].classList.remove('active');
  }
  document.getElementById('scenario1').classList.add('active');
  
  // Reset consequences
  var consequences = document.querySelectorAll('.consequence-box');
  for (var i = 0; i < consequences.length; i++) {
    consequences[i].style.display = 'none';
  }
  
  // Reset buttons
  var buttons = document.querySelectorAll('button');
  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].onclick && buttons[i].onclick.toString().includes('makeChoice')) {
      buttons[i].disabled = false;
    }
  }
  
  // Clear textareas
  var textareas = document.querySelectorAll('textarea');
  for (var i = 0; i < textareas.length; i++) {
    textareas[i].value = '';
  }
}
</script>

</body>
</html>
