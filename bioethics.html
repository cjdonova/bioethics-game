<!DOCTYPE html>
<html>
<head>
    <title>BioEthics Test</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f0f8ff; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        button { background: #4285f4; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; }
        button:hover { background: #3367d6; }
        .hidden { display: none; }
        .choice { background: #f8f9fa; border: 2px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; cursor: pointer; }
        .choice:hover { background: #e8f0fe; border-color: #4285f4; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="start">
            <h1>BioEthics Adventure</h1>
            <p>Navigate complex ethical dilemmas in healthcare</p>
            <button onclick="startGame()">Start Game</button>
        </div>

        <!-- Game Screen -->
        <div id="game" class="hidden">
            <h2 id="title">Gene Therapy Crisis</h2>
            <p id="situation"></p>
            <div id="choices"></div>
            <p>Score: <span id="score">100</span></p>
        </div>

        <!-- Results Screen -->
        <div id="results" class="hidden">
            <h2>Results</h2>
            <p id="outcome"></p>
            <button onclick="restart()">Try Again</button>
        </div>
    </div>

    <script>
        var currentStep = 0;
        var score = 100;
        var decisions = [];

        var scenarios = [
            {
                title: "Gene Therapy Crisis",
                text: "You're a hospital director. A $2 million gene therapy can save children's lives, but you can only afford 4 treatments for 20 children who need it. How do you decide?",
                choices: [
                    { text: "Medical committee ranks by severity", points: 10 },
                    { text: "Lottery system for fairness", points: 5 },
                    { text: "Fundraising campaign", points: 15 },
                    { text: "Treat youngest patients first", points: 0 }
                ]
            },
            {
                title: "AI Privacy Dilemma", 
                text: "Your hospital wants AI that analyzes social media to predict heart attacks. It's 85% accurate but raises privacy concerns. What do you do?",
                choices: [
                    { text: "Implement with patient consent", points: 15 },
                    { text: "Reject due to privacy", points: 5 },
                    { text: "Only for high-risk patients", points: 10 },
                    { text: "Implement without telling patients", points: -10 }
                ]
            },
            {
                title: "Vaccine Pricing",
                text: "Your company developed a life-saving vaccine. It costs $5 to make but you could charge $200. Poor countries can't afford this. How do you price it?",
                choices: [
                    { text: "Tiered pricing - rich countries subsidize poor", points: 20 },
                    { text: "Charge cost price globally", points: 15 },
                    { text: "Market price to fund research", points: -5 },
                    { text: "Free in poor countries, expensive elsewhere", points: 10 }
                ]
            }
        ];

        function startGame() {
            document.getElementById('start').className = 'hidden';
            document.getElementById('game').className = '';
            loadScenario();
        }

        function loadScenario() {
            if (currentStep >= scenarios.length) {
                showResults();
                return;
            }

            var scenario = scenarios[currentStep];
            document.getElementById('title').textContent = scenario.title;
            document.getElementById('situation').textContent = scenario.text;
            document.getElementById('score').textContent = score;

            var choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';

            for (var i = 0; i < scenario.choices.length; i++) {
                var choice = scenario.choices[i];
                var choiceDiv = document.createElement('div');
                choiceDiv.className = 'choice';
                choiceDiv.textContent = choice.text;
                choiceDiv.onclick = (function(points, text) {
                    return function() {
                        makeChoice(points, text);
                    };
                })(choice.points, choice.text);
                choicesDiv.appendChild(choiceDiv);
            }
        }

        function makeChoice(points, text) {
            score += points;
            decisions.push(text);
            currentStep++;
            setTimeout(loadScenario, 500);
        }

        function showResults() {
            document.getElementById('game').className = 'hidden';
            document.getElementById('results').className = '';
            
            var outcome = '';
            if (score >= 90) {
                outcome = 'Excellent! You showed strong ethical leadership.';
            } else if (score >= 70) {
                outcome = 'Good work! You balanced competing interests well.';
            } else if (score >= 50) {
                outcome = 'Mixed results. Consider how to better balance ethical principles.';
            } else {
                outcome = 'Challenging journey. Reflect on stakeholder impacts.';
            }
            
            outcome += ' Final score: ' + score + '/100';
            document.getElementById('outcome').textContent = outcome;
        }

        function restart() {
            currentStep = 0;
            score = 100;
            decisions = [];
            document.getElementById('results').className = 'hidden';
            document.getElementById('start').className = '';
        }
    </script>
</body>
</html>
